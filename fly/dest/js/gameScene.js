"use strict";var gameScene={ele:null,arrBullet:[],arrEnemyPlay:[],score:0,bulletTimer:null,init:function(){return this.ele=document.getElementById("main"),this},start:function(e){var t=this;this.loadding(function(){myPlay.init().move(),t.bulletTimer=setInterval(function(){(new Bullet).init()},e);setInterval(function(){new Enemyplay(Enemyplay.prototype.enemy_type_small).init()},600),setInterval(function(){Math.random()>.4&&new Enemyplay(Enemyplay.prototype.enemy_type_middle).init()},2e3),setInterval(function(){Math.random()>.6&&new Enemyplay(Enemyplay.prototype.enemy_type_big).init()},5e3);t.crash()})},loadding:function(e){var t=document.createElement("div");t.className="logo",this.ele.appendChild(t);var n=document.createElement("div");n.className="load",this.ele.appendChild(n);var a=["images/loading1.png","images/loading2.png","images/loading3.png"],l=0,r=setInterval(function(){l>5?(clearInterval(r),gameScene.ele.removeChild(t),gameScene.ele.removeChild(n),e()):n.style.backgroundImage="url("+a[++l%3]+")"},300)},crash:function(){var e=this,t=setInterval(function(){for(var n=0;n<e.arrEnemyPlay.length;n++){for(var a=0;a<e.arrBullet.length;a++)isCrash(e.arrEnemyPlay[n].ele,e.arrBullet[a].ele)&&(e.arrBullet[a].boom(),e.arrBullet.splice(a,1),e.arrEnemyPlay[n].hurt());isCrash(e.arrEnemyPlay[n].ele,myPlay.ele)&&function(){clearInterval(t),myPlay.crash(),clearInterval(e.bulletTimer),e.ele.getElementsByClassName("formation")[0].style.opacity=1,document.getElementById("totlScore").innerHTML="总分："+e.score;var n=document.getElementById("aname");document.getElementById("btn").onclick=function(){var t=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");url="http://60.205.181.47/myPHPCode4/uploadScore.php",t.open("post",url,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("name="+n.value+"&score="+e.score),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&1==JSON.parse(t.responseText).status&&(location.href="ranking_list.html")}}}()}},30)}};